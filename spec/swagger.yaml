swagger: '2.0'
info:
  title: Site provider api
  description: |
    ![Logo](https://scdn.ntgm.rocks/image/OTH/200/auto/igp-logo-dark.png)
    
    
    Version 2.4.X Of the Site Provider adds validation endpoints, data endpoints for pulling countries, and currencies, as well as refactoring
    of the game library to include multimedia endpoints.
    
    ### PlayerSchemas
    
    Robust, fully dynamic datamodel and FormView templates for registration data, including extendable validator
    logic.
    
    For each portal, there can be multiple playerSchemas, although it is envisioned that all sites will have three:
    
    - registrationFull
    - registrationShort
    - playerProfile
    
    The schemas return datamodel and formview data for dynamic rendering of all forms, and include additional data
    such as:
    
    - HTML5 Hint: the suggested HTML5 control to use with the each field.
    - FieldType: A logical field type, based on the DK formbuilder for handeling of specific types of fields, such as:
      - TAC
      - Country picker
      - Color chooser
      - Link

    As well as other standard field types like date, datetime, etc.  
    
    Field definitions provide information such as required status, JSON dataType, grouping information, and field order.
    
    For select/multiselect/radio fields values valueLists, and default values are provided. These values are provided
    only as "slugs" for the value portion of the controls, leaving localization up to the consumer. 
    
    
    *This should be evaluated in next versions to see if this is the best way to handle localization*
  
    #### Validation
    
    Validation is excuted on submitted registration schemas upon submission. You can also test validate a player registration by posting to the `/player/schemas/{ShemaCode}` endpoint.
    
    
    
    ##### Field Validation
    Field validation logic is handled by returning an array of validators for each field. This will allow
    consumers, if they wish, to implement the same JavaScript validators that are used on the back end. 
    If not desired, validators return slugs of their names for localization. A validator description is
    also provided for developer use.
    
    Individual values can be validated against any available validatory by using the `/validate/{validatorKey}/{value}` endpoint. The HEAD method can be used to optimize speed and minumize network traffic.
    
    
    #### AutoLogin
    
    The autologin option and functionality is added, if requested, and enabled on the backend, a valid session ID for the new user will be generated and returned in headers when a new player is registered.
    
    #### Player/Instant
    This endpoint is provided to allow you to create a "pre-player" or user account on the backend, which will be flagged as incomplete, and can be followed up
    by email in case the player abandonds the rest of the registration procedure. 
    
    This endpoint is provided as a utility to allow you to create multi-step sign up procedures.
    
    ** Players that have only signed up with the instant endpoint will not be able to deposit or spin for money game mode. **
    
    #### PlayerFavorites
    The platform provides storage for player an unlimited number of player favorites.
    YOu can add a favorite list, a single favorite entry, update a single entry, or remove entries directly. 
    
    PlayerFavorites have a "slot" integer which can either be used as a priority setting, or simply a ordering function. Multiple favorites can share a "slot", so you can also use this for grouping favorites.
    
    #### PlayerRatings
    The platform also provides an interface for storing, deleting and retrieving player game reviews. 
    
    #### PlayerLatests
    As part of TotalTelemetry the system provides endpoints to retrive a players latest game launches.
    
    
    Add "lang" query parameter to any call for changing language of messages (format en_GB, it_IT, ...)
  version: "2.4.10"
tags:
  - name: Player
    description: |
      Player related endpoints. Endpoints for registering new players, getting player information, as well
      as retriving the datamodeles/ schemas for the sites player data.
  - name: Game Library
    description: Game Library and Game Related Enpoints
  - name: Auth
    description: Authorization and password related endpoints
  - name : Cashier
    description: Cashier Related endpoints
  - name: Registration
    description: Registration related endpoints.
  - name: Protected
    description: Endpoints which require a valid session.
  - name: Reviews
    description: Endpoints for creating and reading player game reviews.
  - name: Validation
    description: Endpoints for validating data
  - name: Deprecated
    description: Endpoints that have been put out of production, will not be implemented
  - name: Terms of Use
    description : Endpoints related to Terms of Use.
host: dev.pantaloo.com
schemes:
  - http
basePath: /api/v2/site
produces:
  - application/json
paths:
  /games:
    head:
      tags:
        - Game Library
      summary: Get the count of games available on site.
      responses:
        '200':
          description: Response headers
          headers:
            "x-game-count":
              type: integer
              description: Count of games for site.
    get:
      tags:
        - Game Library
      summary: Get games list
      responses:
        '200':
          description: Response object
          headers:
            "x-game-count":
              type: integer
              description: Count of games for site.
          schema:
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
              data:
                type: array
                items:
                  $ref: '#/definitions/Game'
  /games/{id}:
    get:
      tags:
        - Game Library
      summary: Get a single game
      parameters:
        - name: id
          in: path
          required: true
          type: string
          description: Game id
      responses:
        '200':
          description: Game
          schema:
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
              data:
                $ref: '#/definitions/Game'
        '400':
          $ref: '#/responses/Info'
  /player/schemas:
    get:
      tags:
        - Player
        - Registration
      description: | 
         Returns full definition of the player schemas available for the portal. 
        
          Usually portals have 3 schemas:
        
          * registrationFull
          * registrationQuick 
          * PlayerProfile.
      summary: Retrieve all player schemas for site.
      responses:
        '200':
          description: Response object
          schema:
            type: object
            properties:
              info:
                $ref: "#/definitions/PagedInfo"
              data:
                type: array
                description: An array of player schemas
                items:
                  $ref : "#/definitions/PlayerSchema"
  /player/schemas/{SchemaCode}:
    get:
      tags:
        - Player
        - Registration
      summary: Retrieve a single PlayerProfile by code
      parameters:
       - $ref: "#/parameters/SchemaCode"
      responses:
        '200':
          description: Response object
          schema:
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
              data:
                $ref: "#/definitions/PlayerSchema"
    post:
      tags:
        - Player
      summary: Check the registration data for a new player without creating it.
      description: >
        Validates player schema data.  Same as `/player/ [POST]`, but does not actually create the player, just returns if data is schema valid.
          See `/player [post] for more information.`
          
          Is an alias for `/validate/player [POST]`
        
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/PlayerRegistration'
        - $ref: "#/parameters/SchemaCode"
      responses:
        '201':
          description: Valid input, player created/registered.
          headers:
            'Blue-session':
              type: string
              description: If autologin option was requested, and autologin is enabled for the site, the player's valid `sessionid`.
          schema:
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
              data:
                type: object
                properties:
                  valid:
                    type: boolean
        '400' :
          $ref: "#/responses/InvalidPlayerdata"
  /captcha:
    get:
      summary: Get captcha image
      tags:
        - Player
      description: Registration captcha
      produces:
        - image/png
      parameters:
        - name: session
          in: query
          type: string
          required: true
          description: user session (returned by GET /player)
        - name: width
          in: query
          type: number
          required: false
          description: image width (default 90px) 
        - name: height
          in: query
          type: number
          required: false
          description: image width (default 30px) 
        - name: background
          in: query
          type: string
          required: false
          description: background color (default ffffff - white)
      responses:
        200:
          description: Captcha image
          schema:
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
              data:
                type: object
                properties:
                  imgSrc:
                    type: string
                    description: base64 encoded captcha image you can put into <img src=""/>

  /player:
    head:
      tags:
        - Player
        - Protected
      summary: Check to see if the player session is valid
      description: >
        Returns a valid header if the session which was passed is still active/valid.
      parameters:
        - $ref: "#/parameters/Session"
      responses:
        '200':
          description: Session is Valid
          headers:
            "x-valid":
              type: boolean
              description: True if valid session.
            "x-tou-valid":
              type: boolean
              description: False if the TOU needs to be re-accepted (new version)
        401:
          $ref: "#/responses/Info"

    get:
      tags:
        - Player
        - Protected
      summary: Retrieve a player's profile (flat)
      description: >
        Retrieves core player information based on the players session.
      parameters:
        - $ref: "#/parameters/Session"
      responses:
        '200':
          description: Valid input
          schema:
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
              data:
                $ref: '#/definitions/Player'
        404:
          $ref: "#/responses/Info"
    patch:
      tags:
        - Player
      summary: Update players data with simplified schema.
      description: >
       Simplyfied endpoint for updating core player data. For custom and full fields use the /player/full endpoints.
      parameters:
        - $ref: "#/parameters/Session"
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CorePlayerUpdate'
      responses:
        '201':
          description: Valid input - Player updated
          schema:
            type: object
            properties:
              info:
                type: number
              data:
                type: object
                properties:
                  valid:
                    type: boolean
        '400' :
          $ref: "#/responses/InvalidPlayerdata"
    
    post:
      tags:
        - Player
      summary: Create (register) a simple player
      description: >
        A simplyfied endpoint for registering a player using limited, predifined 
        fields.
        
        **This method provides a simple registration which give you a shortcut to the most basic required fields to create a player. Under most jurisdictions, the player will not be able to deposit, withdraw or play until the required player data has been submitted via the `POST` method.**
        
        sessionid in response (in data and in header) is only returned if autologin is requested, and allowed.
        
        **If you wish to use extended/customized fields, use the `POST` method.**
      parameters:
        - name: autoLogin
          in: header
          description: > 
            Requesting autologin of the player if registration succeeds. If the option is enabled in the site setup, and requested, a valid session id will be returned.
          required: false
          default: false
          type: boolean
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CorePlayerInput'
      responses:
        '201':
          description: Valid input - Player Created
          headers:
            'x-sessionid':
              type: string
              description: If autologin option was requested, and autologin is enabled for the site, the player's valid `sessionid`.
          schema:
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
              data:
                $ref: '#/definitions/Player'
        '400' :
          $ref: "#/responses/InvalidPlayerdata"
  /player/extended:
    get:
      tags:
        - Player
      summary: Retrieve a player's full profile. 
      description: >
        Retrieves all player data, including all custom fields, in the form of fields ( fieldInstances ).
      parameters:
        - $ref: "#/parameters/Session"
      responses:
        '200':
          description: Valid input
          schema:
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
              data:
                $ref: '#/definitions/PlayerData'
        404:
          $ref: "#/responses/Info"
    post:
      tags:
        - Player
      summary: Create (register) a new player by posting a player schema.
      description: >
        The fully featured player register endpoint. This endpoint accepts an array of fields ( former `fieldInstance`s ) 

          **The schema code for the desired PlayerSchema must be provided.**
          
          The sent data will then be validated against the selected schema as well as all core data rules. Upon validation error the response object will contain a list of invalid fields as well as which validation rule or rules were triggered, in order of triggering.
        
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/PlayerRegistration'
        - name: autoLogin
          in: query
          type: boolean
          description: > 
            Requesting autologin of the player if registration succeeds. If the option is enabled in the site setup, and requested, a valid session id will be returned.
      responses:
        '201':
          description: Valid input, player created/registered.
          headers:
            'Blue-Session':
              type: string
              description: If autologin option was requested, and autologin is enabled for the site, the player's valid `sessionid`.
          schema:
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
              data:
                $ref: '#/definitions/PlayerData'
        '400' :
          $ref: "#/responses/InvalidPlayerdata"
          
    patch:
      tags:
        - Player
        - Protected
      summary: Update a player profile
      description: >
        Updates (patches) a the profile data for the current session. Only the data
        which needs to be updated should be submitted.
        
        Data is submitted using 'fields' (`fieldInstances`) in  a similar manner to `[POST] /player/full` with arrays of `fields[Str|Num|Arr|Obj]` in the appropriate property. 
      parameters:
        - $ref: "#/parameters/Session"
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/PlayerData'
          
      responses:
        '200':
          description: Valid input
          schema:
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
              data:
                $ref: '#/definitions/PlayerData'
        404:
          $ref: "#/responses/Info"

  /player/instant:
    post:
      tags:
        - Player
      summary: Create the most simple version of a player, will not be able to deposit or spin until additional data is provided.
      description: >
        This allows you to create a "user" which can later be turned into a player by providing additional data. 
        
        ** Upon creation, this player will not be able to deposit or spin, until additional data is provided.**
        
        This endpoint is envisioned to be used when you want to instantly register a player in a multistep process, and persist their basic data to 
        the backend to allow automated cart-ababandon type scenarios.
        
      parameters:
        - name: autoLogin
          in: query
          description: > 
            Requesting autologin of the player if registration succeeds. If the option is enabled in the site setup, and requested, a valid session id will be returned.
          required: false
          default: false
          type: boolean
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/InstantPlayerInput'
      responses:
        '201':
          description: Valid input - Player Created
          headers:
            'x-sessionid':
              type: string
              description: If autologin option was requested, and autologin is enabled for the site, the player's valid `sessionid`.
          schema:
            type: object
            properties:
              info:
                type: number
              data:
                type: object
                properties:
                  valid:
                    type: boolean
        '400' :
          $ref: "#/responses/InvalidPlayerdata"
  /player/status:
    get:
      tags:
        - Player
        - Protected
      summary: Gets the players current status
      parameters:
        - $ref: "#/parameters/Session"
      responses:
        '200':
          description: Player status
          schema:
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
              data:
                type: object
                properties:
                  sessionValid:
                    description: Is the session valid
                    type: boolean
                  touValid:
                    description: Has the user accepted the current TOU
                    type: boolean
                  
      
  /player/game/{id}:
      get:
        tags:
          - Game Library
          - Protected
        summary: Get game
        parameters:
          - $ref: "#/parameters/Session"
          - name: id
            in: path
            required: true
            type: string
            description: Game id
          - name: play_for_fun
            in: query
            required: false
            type: boolean
            description: >-
              By default disabled, set to "true" to enable play for fun mode. Session
              header not require if this option is present
          - name: lang
            in: query
            required: false
            type: string
            default : en
            description: Default 'en'
          - name: homeurl
            in: query
            required: false
            type: string
            description: Home url or return url. All games may not support this, usually for mobile ones
        responses:
          '200':
            description: Game
            schema:
              type: object
              properties:
                info:
                  $ref: "#/definitions/Info"
                data:
                  type: object
                  properties:
                    url:
                      type: string
                      description: Game url
                    system:
                      type: string
                      description: System code (ne, gs, ...)
          '400':
            $ref: '#/responses/Info'
          401:
            $ref: "#/responses/AuthError"

  /player/games:
    head:
      tags:
        - Game Library
        - Protected
        - Player
      summary: > 
        Get the count of games available for the player. 
        
        Filters the game library based upon the logged in player's country and currency settings. Also will filter by the players current IP address for providers who do not allow play in certail countries.
      parameters:
        - $ref: "#/parameters/Session"
      responses:
        '200':
          description: Response headers
          headers:
            "x-game-count":
              type: integer
              description: Count of games for site.
    get:
      tags:
        - Game Library
        - Protected
        - Player
      summary: Get games list
      description: >
        Filters the game library based upon the logged in player's country and currency settings. Also will filter by the players current IP address for providers who do not allow play in certail countries.
      parameters:
        - $ref: "#/parameters/Session"
      responses:
        '200':
          description: Response object
          headers:
            "x-game-count":
              type: integer
              description: Count of games for player.
          schema:
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
              data:
                type: array
                items:
                  $ref: '#/definitions/Game'
  /player/games/favorites:
    head:
      tags:
        - Player
        - Protected
      summary: Get the count of player favorites
      description: > 
        Returns the count of player favorites in header.
      parameters:
        - $ref: "#/parameters/Session"
      responses:
        200:
          description: OK Favorites, found
          headers:
            "x-favorite-count":
              type: integer
              description: Count of favorites for player
        401:
            description: Invalid session
            headers:
              "x-error-code":
                type: string
                description: error code
    get:
      tags:
        - Player
        - Protected
      summary: Get a players favorite games.
      description: > 
        Retrieve the list of the players favorite games, as stored by the player. The platform provides an unlimited number of "slots" which are simply integers for storing the favorites. The system does not check for you if you assing more than one favorite to the same slot, so you may want to check that yourself.
      parameters:
        - $ref: "#/parameters/Session"
      responses:
        200:
          description: OK Favorites, found
          headers:
            "x-favorite-count":
              type: integer
              description: Count of favorites for player
          schema:
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
              data:
                $ref: '#/definitions/PlayerFavorites'
        401:
          description: Invalid session
          schema:
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
        404: 
          description: Player has no favorites
          schema:
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
    post:
      tags:
        - Player
        - Protected
      summary: Post a list of favorite games.
      description: > 
        Post an entire list of player favorites, will overwrite existing list.
      parameters:
        - $ref: "#/parameters/Session"
        - name: body
          in: body
          required: true
          schema:
            $ref : "#/definitions/PlayerFavorites"  
        
      responses:
        200:
          description: Ok, favorite list updated.
          schema:
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
        201:
          description: Ok, favorite list created.
          schema:
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
        401:
          description: Invalid session
          schema:
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
        400: 
          description: Invalid favorites data.
          schema:
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
    put:
        tags:
          - Player
          - Protected
        summary: Add or modify a single favorite listing
        description: > 
          Add or modify a list of player favorites, keyed on game id.
        parameters:
          - $ref: "#/parameters/Session"
          - name: body
            in: body
            required: true
            schema:
              $ref : "#/definitions/PlayerFavorite"  
          
        responses:
          200:
            description: Existing Favorite updated.
            schema:
              type: object
              properties:
                info:
                  $ref: "#/definitions/Info"
          201:
            description: New Favorite created.
            schema:
              type: object
              properties:
                info:
                  $ref: "#/definitions/Info"
          401:
            description: Invalid session
            schema:
              type: object
              properties:
                info:
                  $ref: "#/definitions/Info"
          400: 
            description: Invalid favorites data.
            schema:
              type: object
              properties:
                info:
                  $ref: "#/definitions/Info"
    delete:
        tags:
          - Player
          - Protected
        summary: Remove a favorite listing
        description: > 
          Remove a favorite listing of player favorites, keyed on game id.
        parameters:
          - $ref: "#/parameters/Session"
          - name: body
            in: body
            required: true
            schema:
              $ref : "#/definitions/PlayerFavorite"  
          
        responses:
          200:
            description: Favorite deleted.
            schema:
              type: object
              properties:
                info:
                  $ref: "#/definitions/Info"
          401:
            description: Invalid session
            schema:
              type: object
              properties:
                info:
                  $ref: "#/definitions/Info"
          404: 
            description: Favorite not found
            schema:
              type: object
              properties:
                info:
                  $ref: "#/definitions/Info"
  /player/games/ratings:
    head:
      tags:
        - Player
        - Protected
        - Reviews
      summary: Get the count of player ratings
      description: > 
        Returns the count of player ratings in header.
      parameters:
        - $ref: "#/parameters/Session"
      responses:
        200:
          description: OK Ratings found
          headers:
            "x-count":
              type: integer
              description: Count of ratings for player
        401:
            description: Invalid session
            headers:
              "x-error-code":
                type: string
                description: error code
    get:
      tags:
        - Player
        - Protected
        - Reviews
      summary: Get a players ratings.
      description: > 
        Retrieve a list of players game ratings.
      parameters:
        - $ref: "#/parameters/Session"
      responses:
        200:
          description: OK Ratings found
          headers:
            "x-count":
              type: integer
              description: Count of ratings for player
          schema:
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
              data:
                $ref: '#/definitions/PlayerRatings'
        401:
          description: Invalid session
          schema:
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
        404: 
          description: Player has no ratings
          schema:
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
    
    put:
        tags:
          - Player
          - Protected
          - Reviews
        summary: Add a single rating 
        description: > 
          Add a player game rating.
        parameters:
          - $ref: "#/parameters/Session"
          - name: body
            in: body
            required: true
            schema:
              $ref : "#/definitions/PlayerRating"  
          
        responses:
          201:
            description: New Rating created.
            schema:
              type: object
              properties:
                info:
                  $ref: "#/definitions/Info"
          401:
            description: Invalid session
            schema:
              type: object
              properties:
                info:
                  $ref: "#/definitions/Info"
          400: 
            description: Invalid ratings data.
            schema:
              type: object
              properties:
                info:
                  $ref: "#/definitions/Info"
    delete:
        tags:
          - Player
          - Protected
          - Reviews
        summary: Remove game rating.
        description: > 
          Delete a game rating
        parameters:
          - $ref: "#/parameters/Session"
          - name: body
            in: body
            required: true
            schema:
              $ref : "#/definitions/PlayerRating"  
        responses:
          200:
            description: Rating deleted.
            schema:
              type: object
              properties:
                info:
                  $ref: "#/definitions/Info"
          401:
            description: Invalid session
            schema:
              type: object
              properties:
                info:
                  $ref: "#/definitions/Info"
          404: 
            description: Rating not found
            schema:
              type: object
              properties:
                info:
                  $ref: "#/definitions/Info"
  /player/games/latests:
    get:
      tags:
        - Player
        - Protected
      summary: Get a list of the last 30 player game launches.
      description: > 
        Retrieve a list players lastes game launches.
      parameters:
        - $ref: "#/parameters/Session"
      responses:
        200:
          description: OK Latests found.
          schema:
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
              data:
                $ref: '#/definitions/PlayerLatests'
        401:
          description: Invalid session
          schema:
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
        404: 
          description: Player has no latests
          schema:
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
  /player/games/transactions:
    get:
      summary: Get player game transactions
      parameters:
        - $ref: "#/parameters/Session"
        - name: from
          in: query
          required: false
          type: string
          format: date-time
        - name: to
          in: query
          required: false
          type: string
          format: date-time
      responses:
        '200':
          description: Response object
          schema:
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
              data:
                type: array
                items:
                  $ref: '#/definitions/GameTransaction'
        '401':
          $ref: '#/responses/Error'  
  
  /player/login:
    post:
      tags:
        - Player
        - Auth
      summary: Log a player in to the system.
      description: >
        Log a player in on to the platform.
        
        
        ### Error Codes
          If the login was not successfull (401), `resultCode` indicate what the error on login was:
           
          * Password missing (missing_password)
          * Username missing (missing_username)
          * Invalid Username or Password (invalid_username_or_password)
          * Player not active (correct password, but the player is not allowed to login) (system_error, with the message)
            
            
      parameters:
        - name: body
          in: body
          required: true
          schema:
            type: object
            properties:
              username:
                type: string
              password:
                type: string
      responses:
        '200':
          description: Login successful.
          schema:
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
              data:
                $ref: '#/definitions/Player'
        '401':
          $ref: '#/responses/Error'

  /player/logout:
    get:
      tags:
        - Player
        - Auth
        - Protected
      summary: Player logout
      parameters:
        - $ref: "#/parameters/Session"
      responses:
        '204':
          schema:
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
          description: Logout successful
        '401':
          $ref: '#/responses/Info'
  /player/forgottenpass:
    post:
      tags:
        - Player
        - Auth
      summary: Request a password reset. Email is to be sent. Token inside email. This API is only returning success/fail.
      parameters:
        - name: body
          in: body
          required: true
          schema:
            type: object
            properties:
              email:
                type: string
      responses:
        '200':
          description: Reset token
          schema:
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
        '401':
          $ref: '#/responses/Info'


  /termsofuse/:
    get:
      tags:
        - Terms of Use
      summary: Retrieves latest TOU text, in all avail languages.
      responses:
        '200':
          description: Retrieved TOU information
          schema:
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
              data:
                type: array
                items:
                    type: object
                    properties:
                      langCode:
                        type: string
                        description: Two letter ISO language code
                      touPlainText:
                        type: string
                        description: Terms of use text as plain text.
                      touVersion:
                        type: integer
                        description: The version number of the current TOU
        '401':
          $ref: '#/responses/Info'
          
  /termsofuse/{langCode}:
    get:
      tags:
        - Terms of Use
      summary: Latest published Terms of Use
      parameters:
        - name: langCode
          in: path
          required: true
          type: string
          maxLength : 2
          minLength : 2
          description: Two letter ISO language code to return to TOC.
            
      responses:
        '200':
          description: Retrieved TOU information
          schema:
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
              data:
                type: object
                properties:
                  touPlainText:
                    type: string
                    description: Terms of use text as plain text.
                  touVersion:
                    type: integer
                    description: The version number of the current TOU
        '401':
          $ref: '#/responses/Info'

    
  /player/termsofuse:  
    post:
      tags:
        - Player
        - Protected
      summary: > 
          Marks a player that he accepted terms of use. The version of TOU must be sent in payload, to prevent
          concurrency issues (newly published versions, etc.)
      parameters:
        - name: body
          in: body
          required: true
          schema:
            type: object
            properties:
              acceptedVersionOfTerms:
                type: number
                
      responses:
        '200':
          description: Accepted use of terms. 
          schema:
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
              data:
                type: object
                properties:
                  acceptedVersionOfTerms:
                    type: number
        '401':
          $ref: '#/responses/Info'

  /player/resetpass/{token}:
    post:
      tags:
        - Player
        - Auth
        - Protected
      summary: Reset a players password
      parameters:
        - name: token
          in: path
          required: true
          type: string
        - name: body
          in: body
          required: true
          schema:
            type: object
            properties:
              password:
                type: string
                description: New password
      responses:
        '200':
          description: Reset token
          schema:
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
        '400':
          $ref: "#/responses/InvalidPlayerdata"
  
  /player/balance:
    get:
      tags:
        - Player
        - Cashier
        - Protected
      summary: Player balance
      parameters:
        - $ref: "#/parameters/Session"
      responses:
        '200':
          description: Player balance
          schema:
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
              data:
                type: object
                properties:
                  balance:
                    type: number
                    format: double
                  bonus:
                    type: number
                    format: double
                  currencycode:
                    type: string
                  currencysymbol:
                    type: string
                  status:
                    type: string
        '401':
          $ref: '#/responses/Info'
  /player/transactions:
    get:
      tags:
        - Player
        - Cashier
        - Protected
      summary: Get players transactions
      parameters:
        - $ref: "#/parameters/Session"
        - name: from
          in: query
          required: false
          type: string
          format: date-time
        - name: to
          in: query
          required: false
          type: string
          format: date-time
      responses:
        '200':
          description: Response object
          schema:
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
              data:
                type: array
                items:
                  $ref: '#/definitions/Transaction'
        '401':
          $ref: '#/responses/Info'
  /player/messages:
    get:
      tags:
         - Player
         - Cashier
         - Protected
      summary: 'Get messages for player ( deposit/withdraw confirations, Errors)'
      parameters:
        - $ref: "#/parameters/Session"
      responses:
        '200':
          description: Response object
          schema:
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
              data:
                type: array
                items:
                  type: object
                  properties:
                    message:
                      type: string
                    type:
                      type: string
                      enum:
                        - notification
                        - Error
  
  /player/cashier/custom/{transtype}:
    get:
      summary: Custom cashier
      tags:
        - Cashier
        - Player
        - Protected
      description: >
        Lists all available deposit and withdraw methods for the active player
        with urls to deposit/withdraw forms
      parameters:
        - $ref: "#/parameters/Session"
        - name: transtype
          in: path
          required: true
          type: string
          enum:
            - deposit
            - withdrawal
            - both
          
          description: deposit or withdrawal, or both
        - name: reUrl
          in: query
          required: true
          type: string
          description: Return url.
      responses:
        '200':
          description: Payment url
          schema:
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
              response:
                type: object
                properties:
                  deposit_methods:
                    $ref: "#/definitions/PaymentMethods"
                  withdraw_methods:
                    $ref: "#/definitions/PaymentMethods"
        400: 
          $ref : "#/responses/Error"
        401:
          $ref : "#/responses/Error"
  /player/cashier/transactions/{operation}/{processor}:
    get:
      tags:
        - Player
        - Cashier
        - Protected
      summary: Get cashier url
      description: >
        
        ### Test credit cards:


        #### Credit cards N3DS: 
        
        - `4907639999990022`
        
        - `5546989999990033`
        
        - `4775889400000171`
        
        - `4917484589897107`
        
        - `4012000033330026`
        
        - `5432673003275469`


        #### Credit cards 3DS:

        - `4000000000000002`; exp. date = 01/2018

        - `5200000000000106`; exp. date = 04/2018


        AstropayCard:

        - `1606482490412232`; exp. Date = 08/2016, CVV code: 6771
      parameters:
        - $ref: "#/parameters/Session"
        - name: operation
          in: path
          required: true
          type: string
          enum:
            - deposit
            - withdraw
          description: Operations 'deposit' or 'withdrawal'
        - name: processor
          in: path
          required: true
          type: string
          description: Set to 'piq'
        - name: lang
          in: query
          required: false
          type: string
          default: en_GB
          description: Defaults to en_GB
      responses:
        '200':
          description: Payment url
          schema:
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
              data:
                type: string
                description: Thee payment URL (for see in Iframe)
        '401':
          $ref: '#/responses/Error'
  /player/cashier/accounts:
    get:
      tags:
        - Player
        - Cashier
        - Protected
      summary: Retrieve the players payment accounts
      description: >
        Retrieves all accounts for the player. These accounts, with their ids,
        can be used to implement quick payment functionality by sending accountIds
        instead of card information when excecuting transactions.
      parameters:
        - $ref: "#/parameters/Session"
        - name: type
          in: query
          description: Only returns the passed account type if passed.
          required: false
          type: string 
        - name: showExpired
          in: query
          description: Include expired accounts in the result
          required: false
          type: boolean
          default: false
      responses:
        200:
          description : Accounts Found
          schema: 
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
              data:
                type: object
                properties:
                  methods:
                    type: array
                    items:
                      $ref: "#/definitions/PlayerAccount"
            
                
          
        400:
          description: Error
      
  /player/page/{page}: 
    get:
      tags:
        - Player
        - Cashier
        - Protected
        - Deprecated
      summary: Player iframe pages
      parameters:
        - $ref: "#/parameters/Session"
        - name: page
          in: path
          required: true
          type: string
          enum:
            - profile
            - cashier
            - register
          description: 'Options profile, cashier, register'
        - name: lang
          in: query
          description: Set page language, defaults to en_GB
          required: false
          default: en_GB
          type: string
      responses:
        '200':
          description: Iframe url
          schema:
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
              data:
                type: object
                properties:
                  page:
                    type: string
        '401':
          $ref: '#/responses/Info'
  
  /validate:
    get:
      tags:
        - Validation
      summary: > 
        Get the list of available validators.
      description: >
        To use a single field validator, you can call the validator with a GET with the following pattern:
            
          `/validate/[validatorKey]/[value]`
        
        To retrieve the JS code to use directly on your page you can GET the small
        .js file using the following pattern.
        
          `/validate/js/[validatorKey].js`
          
      responses:
        200:
          description: >
            Returns a list of all available validators.
          schema:
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
              data:
                type: array
                items:
                  $ref: "#/definitions/Validator"
        400:
          $ref: "#/responses/Error"
  /validate/js/{validatorKey}.js:
    get:
      tags:
        - Validation
      description: Retrieves the Javascript code which can be used to validate the designated type of data.
      parameters:
        - name: validatorKey
          in: path
          required: true
          type: string
      responses:
        200:
          description: Javascript file
          schema:
            type: file
            format: application/js
  /validate/{validatorKey}/{value}:
    get:
      tags:
        - Validation
      summary: > 
        Validate a value against the passed validator
      parameters:
        - name: validatorKey
          in: path
          required: true
          type: string
        - name: value
          in: path
          required: true
          type: string
      responses:
        200:
          description: Valid value
          headers:
              x-is-valid:
                description: Is the value valid (false)
                type: boolean
          schema: 
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
        412:
          description: The value is NOT valued with the passed validator
          headers:
              x-is-valid:
                description: Is the value valid (false)
                type: boolean
          schema: 
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
              data:
                $ref: "#/definitions/Validator"
    head:
        tags:
          - Validation
        summary: > 
          Validate a value against the passed validator
        parameters:
          - name: validatorKey
            in: path
            required: true
            type: string
          - name: value
            in: path
            required: true
            type: string
        responses:
          200:
            description: Headers only response
            headers:
              x-is-valid:
                description: Is the value valid (true)
                type: boolean
          412:
            description: The value is NOT valued with the passed validator
            headers:
              x-is-valid:
                description: Is the value valid (false)
                type: boolean
  /validate/player/email/{email}:
    get:
      tags:
        - Player
        - Validation
      summary: Check the validity of a email
      description: >
        Checks the submitted email to see if is valid for a new user for the site. Checks duplicates and email validity.
      parameters:
        - name: email
          in: path
          required: true
          type: string
      responses:
        200:
          description: OK, submitted email is valid, and can be used for a new player
          schema: 
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
        409: 
          description: Invalid, the specificed email can **not** be used for new player registration.
          schema: 
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
        400: 
          description: The email was not submitted correctly, can not validate the username.
          schema: 
            type: object
            properties:
              info:
                $ref: "#/definitions/Info"
  /validate/player/username/{username}:
    get:
      tags:
        - Player
        - Validation
      summary: Check the validity of a username
      description: >
        Checks the submitted username to see if is valid for a new user for the site. Checks duplicates and username standards.
      parameters:
        - name: username
          in: path
          required: true
          type: string
      responses:
        200:
          description: OK, submitted username is valid, and can be used for a new player.
          headers:
            'x-username-valid':
              type: boolean
        409: 
          description: Invalid, the specificed username can **not** be used for new player registration.
          headers:
            'x-username-valid':
              type: boolean
        400: 
          description: The username was not submitted correctly, can not validate the username.

definitions:

  PlayerAccount:
    type: object
    description: the decription
    properties:
      type:
        type: string
        description: the type of the account (creditcard, skrill, etc)
      accountId: 
        type: string
        description: the internal reference to this account
      maskedAccount:
        type: string
        description: For credit cards this includes the credit card number to be displayed for this player account, masked for complience purposes.
      lastUsed:
        type: string
        format: date-time
      cardType:
        type: string
      cardHolder:
        type: string
        description: The name of the person, as it appears on the card/account
      startDate:
        type: string
        format: date-time
      expiryDate:
        type: string
        format: date-time     
      
  
  PlayerFavorites:
    description: Collection of player favorites.
    type: array
    items:
      $ref: "#/definitions/PlayerFavorite"
  
  PlayerLatests:
    description: Collection of player latest games.
    type: array
    items:
      $ref: "#/definitions/PlayerLatest"
  PlayerRatings:
    description: Collection of player game ratings.
    type: array
    items:
      $ref: "#/definitions/PlayerRating"
      
  PlayerFavorite:
    description: Storage of player
    type: object
    required:
      - slot
      - gameId
      - dateAdded
    properties:
      slot:
        type: integer
        default : 0
        description: the orginal, base 0 slot number of the favorite
      gameId:
        type: string
        description: The internal id of the game favorited.
      dateAdded:
        type: string
        format: date-time
    
  PlayerLatest:
    description: Latest game data for player.
    type: object
    properties:
      game:
        $ref: "#/definitions/Game"
      launchdatetime:
        type: string
        format: date-time
 
  PlayerRating:
    description: A player game rating
    type: object
    properties:
      ratingId:
        type: string
        minLength: 5
        maxLength: 24
        description: System generated, or provided rating id.
      ratingScore:
        type: integer
      gameid:
        type: string
      ratingDate:
        type: string
        format: date-time
      ratingNote:
        type: string
        description: Text rating of the game by player.

  Game:
    description: Game object
    type: object
    properties:
      id:
        type: string
      name:
        type: string
      type:
        type: string
      subcategory:
        type: string
      details:
        type: string
      new:
        type: string
      system:
        type: string
      position:
        type: string
      category:
        type: string
      image:
        type: string
      image_preview:
        type: string
      mobile:
        type: boolean
      play_for_fun_supported:
        type: boolean
      order:
        type: integer
        description: The defined sort order for the game.
      tags:
        type: array
        description: An array of tags associated with the game
        items:
          type: string
  Player:
    description: Player object
    type: object
    required:
      - username
      - email
      - fname
      - lname
      - terms
    properties:
      revId:
        type: integer
        description: the internal system revision id. Must be submitted with patch.
      username:
        type: string
      email:
        type: string
      fname:
        type: string
      lname:
        type: string
      terms:
        type: boolean
      newsletter:
        type: boolean
        description: (optional)
      gender:
        type: string
        description: (optional)
        enum:
          - M
          - F
      birthdate:
        type: string
        description: YYYY-MM-DD
      address:
        type: string
      city:
        type: string
      zip:
        type: string
      mobile:
        type: string
      phone:
        type: string
      countrycode:
        type: string
        description: two letter country code
      currencysymbol:
        type: string
      languagecode:
        type: string
        description: language locale code
        example: 
          - en_GB
          - it_IT
      sessionid:
        type: string
  
  
  InstantPlayerInput:
    description: >
      The  most basic  player data required for a player creation.
      
      **The created player will NOT be able to deposit, withdraw or play with realmoney when creating players with this data**
    type: object
    required:
      - username
      - email
      - password
      - password_confirmation

    properties:
      username:
        type: string
      email:
        type: string
      password:
        type: string
      password_confirmation:
        type: string
        description: Must be the same as the password.
      countrycode:
        type: string
        description: two letter country code in lowercase
      captcha:
        type: string
  
  
  
  CorePlayerInput:
    description: >
      The  basic player data required for a player registration. 
    type: object
    required:
      - username
      - email
      - fname
      - lname
      - password
      - password_confirmation
      - acceptedVersionOfTerms
      - birthdate
      - countrycode
    properties:
      username:
        type: string
      email:
        type: string
      fname:
        type: string
      lname:
        type: string
      password:
        type: string
      password_confirmation:
        type: string
        description: Must be the same as the password.
      acceptedVersionOfTerms:
        type: integer
        description: The version number of the Terms of Use which was accepted.
      birthdate:
        type: string
        description: YYYY-MM-DD
      countrycode:
        type: string
        description: two letter country code in lowercase
      captcha:
        type: string
        
  CorePlayerUpdate:
    description: >
      The  basic player For updating
    type: object
    properties:
      username:
        type: string
      email:
        type: string
      fname:
        type: string
      lname:
        type: string

  Transaction:
    description: Transaction
    type: object
    properties:
      id:
        type: string
      time_stamp:
        type: string
      details:
        type: string
      credit:
        type: string
      debit:
        type: string
      balance:
        type: string
      transid:
        type: string
      transby:
        type: string
      agentuser:
        type: string
      method:
        type: string
      system:
        type: string
      accountuser:
        type: string
  
  
  PlayerData:
    description: >
      Object for submitting updates to player profile data. Similar to `PlayerRegistration`, but it is hardcoded to the PlayerProfile schema.
    type: object
    required:
      - revId
    properties:
      revId:
        description: > 
         The internal system revisionID, which was received from player GET. Submitting the revision id back to the system on update ensures that you will not unknowingly overwrite a concurent request.
        type: integer
      fields:
        type: array
        items:
          $ref: "#/definitions/Field"
  
  PlayerRegistration:
    description: |
      Object for submitting player registration data. Since player registration data is dynamic, and based on
      dynamic schemas, with dynamic value types, registration data is submitted using an object which contains
      arrays of the 4 possible value types; 
        
        * strings
        * numbers
        * arrays
        * objects
        
        This combination of field name, type and value is termed a Field ( former FieldInstance ) .

    type: object
    properties:
      acceptedVersionOfTerms:
        type: number
      schemaCode:
        $ref: "#/definitions/SchemaCode"
      fields:
        type: array
        items:
          $ref: "#/definitions/Field"
  
  PlayerSchema:
    type: object
    description: >
      Player Schemas are both data models and form views for player data on the Gaming Portal. PlayerSchemas are used
      both in the registration process as well as in the Player Profile. A PlayerSchema is identified by a name
      and a unique code, and contains an array of fields.
    properties:
      schemaName:
        type: string
        description: A human readable description of the player schema object.
      schemaCode:
        $ref: "#/definitions/SchemaCode"
      fields:
        description: An array of the fields used in the 
        type: array
        items:
          $ref: "#/definitions/FieldDef"

  SchemaCode:
    type: string
    description: Short code for the player schema
  
  Field:
    type: object
    description: Base definition of a field, which is then either a Field ( FieldInstance ), or a FieldDefinition.
    required:
      - code
    properties:
      code:
        type: string
        description: unique code for the field
  
  InvalidField:
    type: object
    properties:
      code:
        type: string
        description: unique code for the field
      validators:
        description: Array of validators, with only the required fields.
        type: array
        items:
            $ref: "#/definitions/Validator"

      
  Field:
    description: Base field instance, for which all field instance types are desendant. 
    type: object
    required:
      - dataType
      - code
    properties:
        code:
          type: string
          description: the fieldDef code
        dataType:
          $ref: "#/definitions/DataType"
          
        valueStr:
          type: string
        valueNum:
          type: number
        valueObj:
          type: object
        valueArr:
          type: array
          items:
              type: string
        valueBool:
          type: boolean

  FieldDef:
    allOf:
      - $ref : "#/definitions/Field"
      - type : object  
        properties:
          name:
            type: string
            description: human readable name of the field
          code:
            type: string
            description: unique code for the field
          fieldType:
            type: string
            description: >
              The field type. One of the supported field types. Some field types have special handling and purpose.
              For example; the TAC type is a special field for Terms and Conditions.
            enum:
              - date
              - datetime
              - boolean
              - password
              - dropdown
              - float
              - link
              - multiselect
              - radio
              - string
              - text
              - number
              - tel
              - color
              - TAC
              - Country
          dataType:
            $ref: "#/definitions/DataType"
        
          HTML5Hint:
            type: string
            description: A hint to the preffered HTML5 input widget to use for this field.
            enum:
              - search
              - email
              - url
              - tel
              - number
              - range
              - date
              - month
              - week
              - time
              - datetime
              - datetime-local
              - color
          cssclass:
            type: string
            description: Suggested/mapped css class
          order:
            type: integer
            description: suggests field order
          group:
            type: string
            description: the group that the field belongs to
          defaultValue:
            description: The default value "slug" for a dropdown or multiselect type (only)
            type: string
          required:
            type: boolean
            description: This field is required, and must have a valid value.
          Updatable:
            type: boolean
            default: true
            description: If false, this field can not be changed by the API after original submission, due to sustem or complience reasons.
          valueList:
            type: array
            items:
              $ref: "#/definitions/DropDownValue"
          validators:
            type: array
            items:
              $ref: "#/definitions/Validator"
      
  DataType:
            type: string
            description: The JSON data type expected by the system.
            enum:
              - string
              - number
              - boolean
              - array
              - object

  Error:
    type: object
    properties:
      code:
        type: string
      messsage:
        type: string
  
  DropDownValue:
    type: object
    required:
      - value
    properties:
      order:
        type: integer
        description: The suggested order of the item
      value:
        type: string
        description: The value of the dropdown value. This is not the value (usually) to display on the UI, rather
          it is the "slug" used for the value, what should be retured to the system. Always is returned as string
          so check the isNumber value to see if you should cast to number.
      isNumber:
        type: boolean
        description: Since we always return DD values as strings, use this to cast the values to number if required.
  
  Validator:
    description: |
      A validator definition. Each validator has a name, and a key which identifies the validator. The name and
      key should be descriptive of that the validator is doing.
    
    type: object
    required:
      - key
      - invalid_message
    properties:
      key:
        type: string
        description: Twelve charactar (UPPER CASE), unique short code idenfifying the validator
        minLength: 12
        maxLength : 12
      invalid_message:
        description: The slug that will be returned upon invalidation. 
        type: string
        minLength: 5
        maxLength: 15
      warning:
        type: boolean
        description: Violations are only warnings
      name:
        type: string
        description: Full name of the validator
      parameters:
        description: Key value pair of parameters for the validator
        type: object
      description: 
        type: string
        description: A developers description of what the validator validates, not for use on the UI.
  
  Info:
    description: Response information, anything that is not response data itself.
    type: object
    required:
      - success
      - resultCode
    properties:
      success:
        type: boolean
        default: true
      resultCode:
        type: string
      message:
        type: string
      responseTime:
        type: number
        format: float
        
  PagedInfo:
    description: Response information, anything that is not response data itself.
    type: object
    required:
      - success
      - resultCode
    properties:
      success:
        type: boolean
        default: true
      resultCode:
        type: string
      message:
        type: string
      responseTime:
        type: number
        format: float
      pageNum: 
        description: The current page number, 0 if no pages
        type: integer
      pages:
        description: The total number of pages, 0 if not paged.
        type: integer
      pageSize:
        description: The size of each page, 0 if no paging.
        type: integer

   
  
  PaymentMethods:
    description: Payment methods available
    type: object
    properties:
      bank_transfers:
        type: array
        items:
            $ref: "#/definitions/PaymentMethod"
      credit_cards:
        type: array
        items:
            $ref: "#/definitions/PaymentMethod"
      instant_banking:
        type: array
        items:
            $ref: "#/definitions/PaymentMethod"
      e_wallets:
        type: array
        items:
            $ref: "#/definitions/PaymentMethod"
      prepaid_cards:
        type: array
        items:
            $ref: "#/definitions/PaymentMethod"
      other:
        type: array
        items:
            $ref: "#/definitions/PaymentMethod"
  PaymentMethod:
    description : Information regarding an available deposit method.
    type: object
    properties:
      name:
        type: string
      code:
        type: string
        description: Code representing the deposit type, to allow for consumer translations.
      text:
        type: string
        description: Payment Text
      timeStr:
        type: string
        description: String decription of the transacction time
      isInstant:
        type: boolean
        default: false
        description: is the transaction instantly credited/debited to the account
      fee:
        type: string
        description: Text decription of the fee.
      limits:
        description: Information about limits for the deposit method, as text.
        type: object
        properties:
          minAmountStr:
            type: string
          maxAmountStr:
            type: string
          minAmountVal:
            type: number
          maxAmountVal:
            type: number
      url:
        type: string
        description: url link to the payment method
      image:
        type: string
        description: URL to full size image for this payment provider.
  GameTransaction:
    description: Transaction
    type: object
    properties:
      id:
        type: string
      time_stamp:
        type: string
      details:
        type: string
      credit:
        type: string
      debit:
        type: string
      balance:
        type: string
      transid:
        type: string
      transby:
        type: string
      agentuser:
        type: string
      method:
        type: string
      system:
        type: string
      accountuser:
        type: string        
          

responses:
  InvalidPlayerdata:
    description: Information returned when player data posted is invalidated by the schema.
    schema:
          type: object
          properties:
            info:
              $ref: "#/definitions/Info"
            data:
              type: object
              properties:
                record:
                  description: Additional information about record level invalidation.
                  type: array
                  items:
                    $ref: "#/definitions/Error"
            
                fields:
                  description: an array of invalid fields, with an array of the invalid validators.
                  type: array
                  items:
                      $ref: "#/definitions/InvalidField"

  
  Error:
    description: Error Information
    schema:
      $ref: "#/definitions/Info"

  AuthError:
    description: Authorization error, resource not available for this session or apiKey
    schema:
      $ref: "#/definitions/Info"
      
  Info:
    description: Basic information
    schema:
        type: object
        required:
          - success
          - resultCode
        properties:
          success:
            type: boolean
            default: true
          resultCode:
            type: string
          message:
            type: string
          responseTime:
            type: number
            format: float
parameters:
  Session:
    name: x-igp-session
    in: header
    description: IGP session key
    required: true
    type: string
  SchemaCode:
    name: SchemaCode
    in: path
    description: A session Code
    required: true
    type: string